<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>JSTColorPicker</title>
    <link rel="stylesheet" href="../github-markdown.css">
</head>

<body class="markdown-body">
    <h1>
        <a id="user-content-jstcolorpicker" class="anchor" href="#jstcolorpicker" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>JSTColorPicker</h1>
    <p>Pick color, location, and area from PNG screenshots (i.e. image annotation). This tool uses <a
            href="https://en.wikipedia.org/wiki/SRGB" rel="nofollow">sRGB IEC61966-2.1</a> as its color space.</p>
    <h2>
        <a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Features</h2>
    <ul>
        <li>Pick colors &amp; areas from PNG screenshots</li>
        <li>Read/Write annotator data from/into EXIF dictionary of PNG files</li>
        <li>Take screenshots directly from iOS devices (depends <code>libimobiledevice</code>)</li>
        <li>Copy/Export annotator data using custom templates</li>
    </ul>
    <h2>
        <a id="user-content-todos" class="anchor" href="#todos" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>TODOs</h2>
    <ul>
        <li>Take screenshots from Android devices</li>
    </ul>
    <h2>
        <a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Usage</h2>
    <h3>
        <a id="user-content-magic-cursor" class="anchor" href="#magic-cursor" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>Magic Cursor</h3>
    <ul>
        <li>
            <code>⌘↵</code> / <strong>Tap</strong> (or <strong>Click</strong> if <em>Force Touch</em> is enabled): Add
            current <em>coordinate &amp; color</em> to content list.</li>
        <li>
            <code>⇧</code> + <strong>Drag</strong> (or <strong>Drag</strong> if <em>Force Touch</em> is enabled): Add
            dragged <em>area</em> to content list.</li>
        <li>
            <code>⌘⌫</code>: Delete <em>coordinate &amp; color</em> at current position or <em>area</em> contains
            current
            position.</li>
        <li>
            <strong>Hold</strong> <code>⌘</code>: Switch to <em>Selection Arrow</em> temporarily.</li>
    </ul>
    <h3>
        <a id="user-content-magnifying-glass" class="anchor" href="#magnifying-glass" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>Magnifying Glass</h3>
    <ul>
        <li>
            <strong>Click</strong>: Magnify to next level from current position.</li>
        <li>
            <code>⇧</code> + <strong>Drag</strong> (or <strong>Drag</strong> if <em>Force Touch</em> is enabled):
            Magnify to
            fill window with dragged area.</li>
        <li>
            <strong>Hold</strong> <code>⌘</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
        <li>
            <strong>Hold</strong> <code>⌥</code>: Switch to <em>Minifying Glass</em> temporarily.</li>
    </ul>
    <h3>
        <a id="user-content-minifying-glass" class="anchor" href="#minifying-glass" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>Minifying Glass</h3>
    <ul>
        <li>
            <strong>Click</strong>: Minify to previous level from current position.</li>
        <li>
            <strong>Hold</strong> <code>⌘</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
        <li>
            <strong>Hold</strong> <code>⌥</code>: Switch to <em>Magnifying Glass</em> temporarily.</li>
    </ul>
    <h3>
        <a id="user-content-selection-arrow" class="anchor" href="#selection-arrow" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>Selection Arrow</h3>
    <ul>
        <li>
            <strong>Hold</strong> <code>⌘</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
    </ul>
    <h3>
        <a id="user-content-move" class="anchor" href="#move" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Move</h3>
    <ul>
        <li>
            <strong>Drag</strong>: A simple drag-to-move operation for common mouse device.</li>
        <li>
            <strong>Hold</strong> <code>⌘</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
        <li>
            <strong>Move with two fingers</strong>: Standard drag operation for Magic Mouse / Trackpad.</li>
        <li>
            <strong>Pinch with two fingers</strong>: Zoom in or out.</li>
        <li>
            <code>⌘</code> + <code>↑ ↓ ← →</code>: Move cursor by 1 pixel.</li>
        <li>
            <code>⇧⌘</code> + <code>↑ ↓ ← →</code>: Move cursor by 10 pixels.</li>
        <li>
            <code>⌃⌘</code> + <code>↑ ↓ ← →</code>: Move cursor by 100 pixels.</li>
    </ul>
    <h3>
        <a id="user-content-fit-window--fill-window" class="anchor" href="#fit-window--fill-window"
            aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fit Window / Fill Window
    </h3>
    <p>There's no need to explain.</p>
    <h3>
        <a id="user-content-annotator-management" class="anchor" href="#annotator-management" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>Annotator Management</h3>
    <ul>
        <li>Select one or more item(s) from left content list.</li>
        <li>Right click to show menu for selected item(s).</li>
        <li>
            <code>0123456789</code>: Enter item <code>ID</code> to select existing item quickly.</li>
    </ul>
    <h3>
        <a id="user-content-export" class="anchor" href="#export" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Export</h3>
    <ul>
        <li>
            <code>⌘E</code>: Export all items using selected template.</li>
    </ul>
    <h3>
        <a id="user-content-others" class="anchor" href="#others" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Others</h3>
    <ul>
        <li>
            <code>⌘`</code>: Copy the <em>coordinate &amp; color</em> at the cursor location directly to the general
            pasteboard.</li>
    </ul>
    <h2>
        <a id="user-content-menu-key-equivalents" class="anchor" href="#menu-key-equivalents" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>Menu Key Equivalents</h2>
    <h3>
        <a id="user-content-jstcolorpicker-1" class="anchor" href="#jstcolorpicker-1" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>JSTColorPicker</h3>
    <ul>
        <li>
            <code>⌘,</code> Preferences...</li>
        <li>
            <code>⌘H</code> Hide JSTColorPicker</li>
        <li>
            <code>⌥⌘H</code> Hide Others</li>
        <li>
            <code>⌘Q</code> Quit JSTColorPicker</li>
    </ul>
    <h3>
        <a id="user-content-file" class="anchor" href="#file" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>File</h3>
    <ul>
        <li>
            <code>⌘N</code> New</li>
        <li>
            <code>⌘O</code> Open...</li>
        <li>
            <code>⌘W</code> Close</li>
        <li>
            <code>⌘S</code> Save...</li>
        <li>
            <code>⇧⌘S</code> Save As...</li>
        <li>
            <code>⇧⌘D</code> Compare Opened Documents</li>
    </ul>
    <h3>
        <a id="user-content-edit" class="anchor" href="#edit" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Edit</h3>
    <ul>
        <li>
            <code>⌘Z</code> Undo</li>
        <li>
            <code>⇧⌘Z</code> Redo</li>
        <li>
            <code>⌫</code> Delete</li>
        <li>
            <code>⌘A</code> Select All</li>
    </ul>
    <h3>
        <a id="user-content-view" class="anchor" href="#view" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>View</h3>
    <ul>
        <li>
            <code>⌥⌘T</code> Show/Hide Toolbar</li>
        <li>
            <code>⌃⌘S</code> Show/Hide Sidebar</li>
        <li>
            <code>⌃⌘F</code> Enter/Exit Full Screen</li>
        <li>
            <code>⌃⌘G</code> <strong>Toggle Color Grid</strong>
        </li>
        <li>
            <code>⌃⌘C</code> <strong>Toggle Color Panel</strong>
        </li>
    </ul>
    <h3>
        <a id="user-content-devices" class="anchor" href="#devices" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Devices</h3>
    <ul>
        <li>
            <code>⌥⌘S</code> <strong>Screenshot</strong>
        </li>
    </ul>
    <h3>
        <a id="user-content-window" class="anchor" href="#window" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Window</h3>
    <ul>
        <li>
            <code>⌘M</code> Minimize</li>
        <li>
            <code>⌃⇧⇥</code> Show Previous Tab</li>
        <li>
            <code>⌃⇥</code> Show Next Tab</li>
        <li>
            <code>⇧⌘\</code> Show All Tabs</li>
    </ul>
    <h3>
        <a id="user-content-help" class="anchor" href="#help" aria-hidden="true"><span aria-hidden="true"
                class="octicon octicon-link"></span></a>Help</h3>
    <ul>
        <li>
            <code>⌘?</code> JSTColorPicker Help</li>
    </ul>
    <h2>
        <a id="user-content-toolbar-key-equivalents" class="anchor" href="#toolbar-key-equivalents"
            aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Toolbar Key Equivalents
    </h2>
    <ul>
        <li>
            <code>⌃F1</code> Open...</li>
        <li>
            <code>⌃F2</code> <em>Magic Cursor</em>
        </li>
        <li>
            <code>⌃F3</code> <em>Magnifying Glass</em>
        </li>
        <li>
            <code>⌃F4</code> <em>Minifying Glass</em>
        </li>
        <li>
            <code>⌃F5</code> <em>Selection Arrow</em>
        </li>
        <li>
            <code>⌃F6</code> <em>Move</em>
        </li>
        <li>
            <code>⌃F7</code> Fit Window</li>
        <li>
            <code>⌃F8</code> Fill Window</li>
    </ul>
    <h2>
        <a id="user-content-customizable-templates" class="anchor" href="#customizable-templates"
            aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customizable Templates
    </h2>
    <p>JSTColorPicker uses <a href="https://www.lua.org/" rel="nofollow">Lua 5.3.4</a> as its template engine.</p>
    <p>Click the <em>export option</em> button at the bottom right of window, you will see available templates in
        <code>templates</code> folder. Click <code>Show Templates...</code> will show that folder in Finder. The name of
        template file should end up with path extension <code>.lua</code>. Selected template will be applied to all
        copy/export actions if possible.</p>
    <h3>
        <a id="user-content-write-templates" class="anchor" href="#write-templates" aria-hidden="true"><span
                aria-hidden="true" class="octicon octicon-link"></span></a>Write Templates</h3>
    <p><em>Template</em> is a <em>Lua</em> script which simply returns a table:</p>
    <div class="highlight highlight-source-lua">
        <pre><span class="pl-k">return</span> {
    uuid <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0C2E7537-45A6-43AD-82A6-35D774414A09<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span>required, a unique UUID4 identifier</span>
    name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Example<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> required, name only for display</span>
    version <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0.1<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> required, same template with earlier version will not be displayed</span>
    platformVersion <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1.6<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> minimum required software version</span>
    author <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Lessica<span class="pl-pds">"</span></span>,
    description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>This is an example of JSTColorPicker export script.<span class="pl-pds">"</span></span>,
    extension <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>lua<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> file extension used for exporting</span>
    generator <span class="pl-k">=</span> generator,  <span class="pl-c"><span class="pl-c">--</span> required</span>
}</pre>
    </div>
    <p><code>generator</code> is a lua function which will be executed when you copy or export item(s):</p>
    <div class="highlight highlight-source-lua">
        <pre><span class="pl-k">local</span> generator <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">image</span>, ...)
    <span class="pl-c"><span class="pl-c">--</span></span>
    <span class="pl-k">local</span> args <span class="pl-k">=</span> {<span class="pl-c1">...</span>}
    <span class="pl-c"><span class="pl-c">--</span></span>
<span class="pl-k">end</span></pre>
    </div>
    <p><code>image</code> is a lua table which represents the opened image document in current window:</p>
    <ul>
        <li>
            <code>image.w</code>: image width in pixels</li>
        <li>
            <code>image.h</code>: image height in pixels</li>
        <li>
            <code>image.get_color(x, y)</code>: returns <strong>argb</strong> integer value of color</li>
        <li>
            <code>image.get_image(x, y, w, h)</code>: returns cropped image's PNG data representation</li>
    </ul>
    <p><code>args</code> is a lua sequence of <em>coordinate &amp; color</em> and <em>area</em>:</p>
    <ul>
        <li>
            <em>coordinate &amp; color</em>:
            <ul>
                <li><code>color.id</code></li>
                <li><code>color.similarity</code></li>
                <li><code>color.x</code></li>
                <li><code>color.y</code></li>
                <li>
                    <code>color.color</code>: <strong>argb</strong> integer value of color</li>
            </ul>
        </li>
        <li>
            <em>area</em>:
            <ul>
                <li><code>area.id</code></li>
                <li><code>area.similarity</code></li>
                <li><code>area.x</code></li>
                <li><code>area.y</code></li>
                <li>
                    <code>area.w</code>: area width in pixels</li>
                <li>
                    <code>area.h</code>: area height in pixels</li>
            </ul>
        </li>
    </ul>
    <p>Test the existence of <code>item.w</code> to check if the item is a <em>coordinate &amp; color</em> or an
        <em>area</em>.</p>
</body>

</html>