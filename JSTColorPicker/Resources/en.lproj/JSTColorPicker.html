<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>JSTColorPicker</title>
    <link rel="stylesheet" href="../github-markdown.css">
</head>

<body class="markdown-body">
<h1>
<a id="user-content-jstcolorpicker" class="anchor" href="#jstcolorpicker" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JSTColorPicker</h1>
<p>Tagging color, location, and area from PNG screenshots (i.e. image annotation). This tool uses <a href="https://en.wikipedia.org/wiki/SRGB" rel="nofollow">sRGB IEC61966-2.1</a> as its color space.</p>
<h2>
<a id="user-content-features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>
<ul>
<li>Pick colors &amp; areas from PNG screenshots</li>
<li>Read/Write annotation data from/into EXIF dictionary of PNG files</li>
<li>Take screenshots directly from iOS devices (based on <a href="https://github.com/libimobiledevice/libimobiledevice"><code>libimobiledevice</code></a>)</li>
<li>Copy/Export annotation data using custom templates</li>
<li>Show the difference between screenshots</li>
</ul>
<h2>
<a id="user-content-todos" class="anchor" href="#todos" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>TODOs</h2>
<ul>
<li>Take screenshots from Android devices</li>
</ul>
<h2>
<a id="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>
<h3>
<a id="user-content-magic-cursor" class="anchor" href="#magic-cursor" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Magic Cursor</h3>
<p>Add, or delete annotations.</p>
<ul>
<li>
<code>⌘↵</code> / <strong>Click / Tap</strong> (or <strong>Click</strong> if <em>Force Touch</em> is enabled): Add current <em>color &amp; coordinates</em> to content list.</li>
<li>
<code>⇧</code> + <strong>Drag</strong> (or <strong>Drag</strong> if <em>Force Touch</em> is enabled): Add dragged <em>area</em> to content list.</li>
<li>
<code>⌘⌫</code>: Delete <em>color &amp; coordinates</em> at current cursor position or the top most <em>area</em> contains current cursor position.</li>
<li>
<strong>Right Click / Tap with two fingers</strong> (or <strong>Click with two fingers</strong> if <em>Force Touch</em> is enabled): Delete <em>color &amp; coordinates</em> at current cursor position or the top most <em>area</em> contains current cursor position.</li>
<li>
<code>⌥</code> + <strong>Right Click / Tap with two fingers</strong> (or <strong>Click with two fingers</strong> if <em>Force Touch</em> is enabled): Display a menu with all annotations cascading under the current cursor position, select one to delete the annotation.</li>
<li>
<strong>Hold</strong> <code>⌃</code>: Switch to <em>Selection Arrow</em> temporarily.</li>
</ul>
<h3>
<a id="user-content-selection-arrow" class="anchor" href="#selection-arrow" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Selection Arrow</h3>
<p>View, select, or modify annotations.</p>
<ul>
<li>
<strong>Click / Tap</strong> (or <strong>Click</strong> if <em>Force Touch</em> is enabled): Select <em>color &amp; coordinates</em> at current cursor position or the top most <em>area</em> contains current cursor position.</li>
<li>
<code>⌘</code> + <strong>Click / Tap</strong> (or <strong>Click</strong> if <em>Force Touch</em> is enabled): Select <em>color &amp; coordinates</em> at current cursor position or the top most <em>area</em> contains current cursor position, while keeping the previous selections.</li>
<li>
<code>⇧</code> + <strong>Click / Tap</strong> (or <strong>Click</strong> if <em>Force Touch</em> is enabled): Select <em>color &amp; coordinates</em> at current cursor position or all <em>areas</em> contains current cursor position, while keeping the previous selections.</li>
<li>
<code>⌥</code> + <strong>Click / Tap</strong> (or <strong>Click</strong> if <em>Force Touch</em> is enabled): Display a menu with all annotations cascading under the current cursor position, select one to select the annotation, while keeping the previous selections.</li>
<li>
<strong>Right Click / Tap with two fingers</strong> (or <strong>Click with two fingers</strong> if <em>Force Touch</em> is enabled): Delete <em>color &amp; coordinates</em> at current cursor position or the top most <em>area</em> contains current cursor position.</li>
<li>
<code>⌥</code> + <strong>Right Click / Tap with two fingers</strong> (or <strong>Click with two fingers</strong> if <em>Force Touch</em> is enabled): Display a menu with all annotations cascading under the current cursor position, select one to delete the annotation.</li>
<li>
<strong>Drag</strong> (or <strong>Drag</strong> if <em>Force Touch</em> is enabled): Modify <em>color &amp; coordinates</em> to a new position, or modify <em>area</em> to a new dimension.</li>
<li>
<strong>Hold</strong> <code>⌃</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
</ul>
<h3>
<a id="user-content-magnifying-glass" class="anchor" href="#magnifying-glass" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Magnifying Glass</h3>
<p>Zoom in at a preset scale, supports zooming into a specified area.</p>
<ul>
<li>
<strong>Click</strong>: Magnify to next level from current cursor position.</li>
<li>
<code>⇧</code> + <strong>Drag</strong> (or <strong>Drag</strong> if <em>Force Touch</em> is enabled): Magnify to fill window with dragged area.</li>
<li>
<strong>Hold</strong> <code>⌃</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
<li>
<strong>Hold</strong> <code>⌥</code>: Switch to <em>Minifying Glass</em> temporarily.</li>
</ul>
<h3>
<a id="user-content-minifying-glass" class="anchor" href="#minifying-glass" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Minifying Glass</h3>
<p>Zoom out at a preset scale.</p>
<ul>
<li>
<strong>Click</strong>: Minify to previous level from current cursor position.</li>
<li>
<strong>Hold</strong> <code>⌃</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
<li>
<strong>Hold</strong> <code>⌥</code>: Switch to <em>Magnifying Glass</em> temporarily.</li>
</ul>
<h3>
<a id="user-content-moving-hand" class="anchor" href="#moving-hand" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Moving Hand</h3>
<p>Drag to move the scene, or view the major tag of annotations.</p>
<ul>
<li>
<strong>Drag</strong>: A simple drag-to-move operation for common pointer devices.</li>
<li>
<strong>Hold</strong> <code>⌃</code>: Switch to <em>Magic Cursor</em> temporarily.</li>
</ul>
<h3>
<a id="user-content-general-shortcuts" class="anchor" href="#general-shortcuts" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>General Shortcuts</h3>
<ul>
<li>
<strong>Move with one finger</strong>: Standard move operation (Magic Mouse).</li>
<li>
<strong>Move with two fingers</strong>: Standard move operation (Magic Trackpad).</li>
<li>
<strong>Pinch with two fingers</strong>: Zoom in or out (Magic Trackpad).</li>
<li>
<strong>Double Tap with one fingers</strong>: Smart Zoom in or out (Magic Mouse).</li>
<li>
<strong>Double Tap with two fingers</strong>: Smart Zoom in or out (Magic Trackpad).</li>
<li>
<code>⌘</code> + <code>↑ ↓ ← →</code>: Move cursor by 1 pixel.</li>
<li>
<code>⇧⌘</code> + <code>↑ ↓ ← →</code>: Move cursor by 10 pixels.</li>
<li>
<code>⌃⌘</code> + <code>↑ ↓ ← →</code>: Move cursor by 100 pixels.</li>
<li>
<code>⌘-</code>: <strong>Zoom out</strong> with the current cursor position (if the cursor is outside the scene, the scene is zoomed out with the center point).</li>
<li>
<code>⌘=</code>: <strong>Zoom in</strong> with the current cursor position (if the cursor is outside the scene, the scene is zoomed in with the center point).</li>
<li>
<code>⌘[</code>: If the selected <em>annotation</em> is the only selected <em>annotation</em> in all levels under the current cursor position, the selected state is switched to the previous <em>annotation</em> in the cascade under the current cursor position.</li>
<li>
<code>⌘]</code>: If the selected <em>annotation</em> is the only selected <em>annotation</em> in all levels under the current cursor position, the selected state is switched to the next <em>annotation</em> in the cascade under the current cursor position.</li>
</ul>
<h3>
<a id="user-content-ruler" class="anchor" href="#ruler" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ruler</h3>
<ul>
<li>
<strong>Drag</strong> (or <strong>Drag</strong> if <em>Force Touch</em> is enabled): Modify <em>color &amp; coordinates</em> to a new position, or modify <em>area</em> to a new dimension.</li>
</ul>
<h3>
<a id="user-content-fit-window--fill-window" class="anchor" href="#fit-window--fill-window" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Fit Window / Fill Window</h3>
<p>Scale the view to fit/fill the window size.</p>
<h3>
<a id="user-content-annotation-management" class="anchor" href="#annotation-management" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Annotation Management</h3>
<ul>
<li>Select one or more item(s) from left content list.</li>
<li>Right click to show menu for selected item(s):
<ul>
<li>
<code>↵</code>: Locate: Scroll the scene to the selected annotation, and adjust the scale to fit its size.</li>
<li>
<code>⌥↵</code>: Relocate: In the pop-up tab, precisely adjust the position of the selected annotation.</li>
<li>
<code>⌘C</code>: Copy: Copy these annotations with current template.</li>
<li>
<code>⌘V</code>: Paste: Paste annotations from another document.</li>
<li>
<code>⌘D</code>: Duplicate: Create another annotation with the same size.</li>
<li>
<code>⌘T</code>: Smart Trim: Trim this area with Canny edge detection algorithm.</li>
<li>
<code>⌥⌘E</code>: Export As: Export these annotations with current template.</li>
<li>
<code>⌥⌘R</code>: Resample: Save this area to a PNG file.</li>
<li>
<code>⌘A</code>: Select All</li>
<li>
<code>⌫</code>: Delete</li>
</ul>
</li>
<li>
<code>0123456789</code>: Enter item <code>ID</code> to select existing item quickly.</li>
<li>Type a string in the following format into the input box in the bottom left corner and type <strong>Enter</strong> to add or locate an item. Right-click <code>+</code> to toggle the data entry format.
<ul>
<li>
<em>color &amp; coordinates</em>: <code>(x, y)</code>
</li>
<li>
<em>area</em>: <code>(x1, y1, x2, y2)</code>
</li>
<li>
<em>area</em>: <code>(x, y, w, h)</code>
</li>
</ul>
</li>
</ul>
<h3>
<a id="user-content-others" class="anchor" href="#others" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Others</h3>
<ul>
<li>
<code>⌘`</code>: Copy <em>color &amp; coordinates</em> at current cursor location directly to the general pasteboard.</li>
</ul>
<h2>
<a id="user-content-menu-key-equivalents" class="anchor" href="#menu-key-equivalents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Menu Key Equivalents</h2>
<h3>
<a id="user-content-jstcolorpicker-1" class="anchor" href="#jstcolorpicker-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>JSTColorPicker</h3>
<ul>
<li>
<code>⌘,</code> Preferences…</li>
<li>
<code>⌘H</code> Hide JSTColorPicker</li>
<li>
<code>⌥⌘H</code> Hide Others</li>
<li>
<code>⌘Q</code> Quit JSTColorPicker</li>
</ul>
<h3>
<a id="user-content-file" class="anchor" href="#file" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>File</h3>
<ul>
<li>
<code>⌘N</code> New</li>
<li>
<code>⌘O</code> Open…</li>
<li>
<code>⌘W</code> Close</li>
<li>
<code>⌘S</code> Save</li>
<li>
<code>⇧⌘S</code> Save As…</li>
<li>
<code>⇧⌘D</code> Compare Opened Documents</li>
<li>
<code>⇧⌘C</code>: Copy all annotations using selected template.</li>
<li>
<code>⇧⌘E</code>: Export all annotations using selected template.</li>
</ul>
<h3>
<a id="user-content-edit" class="anchor" href="#edit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Edit</h3>
<ul>
<li>
<code>⌘Z</code> Undo</li>
<li>
<code>⇧⌘Z</code> Redo</li>
<li>
<code>⌘C</code> Copy: Copy these annotations with current template.</li>
<li>
<code>⌘V</code> Paste: Paste annotations from another document.</li>
<li>
<code>⌘T</code> Smart Trim: Trim this area with Canny edge detection algorithm.</li>
<li>
<code>⌥⌘E</code> Export As: Export these annotations with current template.</li>
<li>
<code>⌥⌘R</code> Resample: Save this area to a PNG file.</li>
<li>
<code>⌘A</code> Select All</li>
<li>
<code>⌫</code> Delete</li>
</ul>
<h3>
<a id="user-content-view" class="anchor" href="#view" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>View</h3>
<ul>
<li>
<code>⌥⌘T</code> Show/Hide Toolbar</li>
<li>
<code>⌃⌘S</code> Show/Hide Sidebar</li>
<li>
<code>⌃⌘F</code> Enter/Exit Full Screen</li>
<li>
<code>⌃⌘G</code> <strong>Toggle Color Grid</strong>
</li>
<li>
<code>⌃⌘C</code> <strong>Toggle Color Panel</strong>
</li>
</ul>
<h3>
<a id="user-content-devices" class="anchor" href="#devices" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Devices</h3>
<ul>
<li>
<code>⌃S</code> <strong>Take Screenshot</strong>: Take screenshots directly from the selected devices.</li>
<li>
<code>⌃I</code> <strong>Discovery Devices</strong>: Immediately broadcast a search for available devices on the LAN.</li>
</ul>
<h3>
<a id="user-content-templates" class="anchor" href="#templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Templates</h3>
<ul>
<li>
<code>⌃⌘</code> + <code>123456789</code>: Switch between templates.</li>
<li>
<code>⌃⌘0</code> <em>Reload All Templates</em>
</li>
<li>
<code>⌃⌘F</code> <em>Show Templates…</em>: Show all templates in Finder.</li>
<li>
<code>⌃⌘L</code> <em>Show Logs…</em>: Open <em>Console.app</em> to watch all exceptions and warnings thrown from templates loading.</li>
</ul>
<h3>
<a id="user-content-window" class="anchor" href="#window" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Window</h3>
<ul>
<li>
<code>⌘M</code> Minimize</li>
<li>
<code>⌃⇧⇥</code> Show Previous Tab</li>
<li>
<code>⌃⇥</code> Show Next Tab</li>
<li>
<code>⇧⌘\</code> Show All Tabs</li>
</ul>
<h3>
<a id="user-content-help" class="anchor" href="#help" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Help</h3>
<ul>
<li>
<code>⌘?</code> JSTColorPicker Help</li>
</ul>
<h2>
<a id="user-content-toolbar-key-equivalents" class="anchor" href="#toolbar-key-equivalents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Toolbar Key Equivalents</h2>
<ul>
<li>
<code>[Fn]F1</code> <em>Magic Cursor</em>
</li>
<li>
<code>[Fn]F2</code> <em>Selection Arrow</em>
</li>
<li>
<code>[Fn]F3</code> <em>Magnifying Glass</em>
</li>
<li>
<code>[Fn]F4</code> <em>Minifying Glass</em>
</li>
<li>
<code>[Fn]F5</code> <em>Moving Hand</em>
</li>
</ul>
<h2>
<a id="user-content-customizable-templates" class="anchor" href="#customizable-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Customizable Templates</h2>
<p>JSTColorPicker uses <a href="https://www.lua.org/" rel="nofollow">Lua 5.4.3</a> as its template engine.</p>
<p>Click the <em>export option</em> button at the bottom right of window, you will see available templates in <code>templates</code> folder. Click <code>Show Templates…</code> will show that folder in Finder. The name of template file should end up with path extension <code>.lua</code>. Selected template will be applied to all copy/export actions if possible.</p>
<h3>
<a id="user-content-write-templates" class="anchor" href="#write-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Write Templates</h3>
<p><em>Template</em> is a <em>Lua</em> script which simply returns a table:</p>
<div class="highlight highlight-source-lua"><pre><span class="pl-k">return</span> {
    uuid <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0C2E7537-45A6-43AD-82A6-35D774414A09<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span>required, a unique UUID4 identifier</span>
    name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Example<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> required, name only for display</span>
    version <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>0.1<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> required, same template with earlier version will not be displayed</span>
    platformVersion <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>1.6<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> minimum required software version</span>
    author <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>Lessica<span class="pl-pds">"</span></span>,
    description <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>This is an example of JSTColorPicker export script.<span class="pl-pds">"</span></span>,
    extension <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">"</span>lua<span class="pl-pds">"</span></span>,  <span class="pl-c"><span class="pl-c">--</span> file extension used for exporting</span>
    generator <span class="pl-k">=</span> generator,  <span class="pl-c"><span class="pl-c">--</span> required</span>
}</pre></div>
<p><code>generator</code> is a lua function which will be executed when you copy or export item(s):</p>
<div class="highlight highlight-source-lua"><pre><span class="pl-k">local</span> generator <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">image</span>, <span class="pl-smi">items</span>)
    <span class="pl-c"><span class="pl-c">--</span></span>
<span class="pl-k">end</span></pre></div>
<p><code>image</code> is a lua table which represents the opened image document in current window:</p>
<ul>
<li>
<code>image.path</code>: document file path</li>
<li>
<code>image.filename</code>: document file name</li>
<li>
<code>image.width</code>: image width in pixels</li>
<li>
<code>image.height</code>: image height in pixels</li>
<li>
<code>image.get_color(x, y)</code>: returns <strong>argb</strong> 32-bit integer value of color</li>
<li>
<code>image.get_image(x, y, w, h)</code>: returns cropped image's PNG data representation</li>
</ul>
<p><code>items</code> is a lua sequence of <em>color &amp; coordinates</em> and <em>area</em>:</p>
<ul>
<li>
<p><em>color &amp; coordinates</em>:</p>
<ul>
<li><code>color.id</code></li>
<li><code>color.name</code></li>
<li><code>color.tags</code></li>
<li><code>color.similarity</code></li>
<li><code>color.x</code></li>
<li><code>color.y</code></li>
<li>
<code>color.color</code>: <strong>argb</strong> 32-bit integer value of color</li>
</ul>
</li>
<li>
<p><em>area</em>:</p>
<ul>
<li><code>area.id</code></li>
<li><code>area.name</code></li>
<li><code>area.tags</code></li>
<li><code>area.similarity</code></li>
<li><code>area.minX</code></li>
<li><code>area.minY</code></li>
<li><code>area.maxX</code></li>
<li><code>area.maxY</code></li>
<li>
<code>area.width</code>: area width in pixels</li>
<li>
<code>area.height</code>: area height in pixels</li>
</ul>
</li>
</ul>
<p>Test the existence of <code>item.width</code> to check if the item is a <em>color &amp; coordinates</em> or an <em>area</em>.</p>
<h2>
<a id="user-content-license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>LICENSE</h2>
<ul>
<li><a href="https://github.com/Lessica/JSTColorPicker/blob/master/LICENSE">JSTColorPicker</a></li>
<li><a href="https://github.com/libimobiledevice/libimobiledevice/blob/master/COPYING.LESSER">libimobiledevice</a></li>
<li><a href="https://github.com/shpakovski/MASPreferences/blob/master/LICENSE.md">MASPreferences</a></li>
<li><a href="https://github.com/sparkle-project/Sparkle/blob/master/LICENSE">Sparkle</a></li>
</ul>

</body>

</html>
